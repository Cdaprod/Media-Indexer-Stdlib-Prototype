<!-- base.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Video DAM{% endblock %}</title>

  <!-- your global CSS -->
  <link rel="stylesheet"
        href="{{ url_for('static', path='styles.css') }}" />

  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% block head %}
  {{ super() }}
  <style>
    /* ───────────────────────────────────────────────────────────
       LOCK ROOT LAYOUT
       ─────────────────────────────────────────────────────────── */
    html, body {
      height: 100vh;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    /* ───────────────────────────────────────────────────────────
       APP FRAME: SPLIT SIDEBAR & MAIN
       ─────────────────────────────────────────────────────────── */
    .app-frame {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* ───────────────────────────────────────────────────────────
       SIDEBAR
       ─────────────────────────────────────────────────────────── */
    .sidebar {
      flex-shrink: 0;
      width: 240px;
      height: 100vh;
      overflow-y: auto;
      /* keep your existing sidebar styling here: background, blur, etc. */
    }

    /* ───────────────────────────────────────────────────────────
       MAIN DASHBOARD
       ─────────────────────────────────────────────────────────── */
    .dashboard-main {
      flex: 1 1 0;
      height: 100vh;
      min-width: 0;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      overscroll-behavior: contain;
    }

    /* ───────────────────────────────────────────────────────────
       OPTIONAL: MOBILE DRAWER
       ─────────────────────────────────────────────────────────── */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        top: 0; right: 0;
        transform: translateX(100%);
        transition: transform .3s ease;
      }
      .sidebar.open {
        transform: translateX(0);
      }
      .app-frame {
        position: relative;
      }
    }
  </style>
  {% endblock %}
</head>
<body>
  <div class="app-frame">
    <!-- Sidebar (scrollable) -->
    <nav id="sidebar" class="sidebar">
      {% include "partials/_sidebar.html" %}
    </nav>

    <!-- Main dashboard (scrollable) -->
    <main class="dashboard-main">
      {% block body %}{% endblock %}
    </main>
  </div>

  <button id="burger" class="burger"
          onclick="document.querySelector('.sidebar').classList.toggle('open')">
    ☰
  </button>

  <!-- your existing JS bundles -->
  <script type="module"
          src="{{ url_for('static', path='components/object-renderer.js') }}"></script>
  <script type="module"
          src="{{ url_for('static', path='components/batch-card.js') }}"></script>
  <script type="module"
          src="{{ url_for('static', path='components/video-card.js') }}"></script>
  <script type="module"
          src="{{ url_for('static', path='app.js') }}"></script>
  {% block scripts %}{% endblock %}
</body>
</html>